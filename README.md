# Основное

* UTF-8 без BOM;
* В качестве отступа используется 4 пробела.

Основным подходом в разработке стилевых файлов являются методологии, основанные на концепции абсолютно независимых блоков (АНБ), такие как BEM, BEViS и пр.

Для примеров в статье использует [BEM-синтаксис от Гарри Робертса и Николаса Галлахера](http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/).

Статья базируется и дополняет [статью о кодстайле](https://confluence.2gis.ru/pages/viewpage.action?pageId=100335949), принятом в команде Онлайна

#HTML
 
##Общие соглашения
 
Атрибуты элементов всегда заключаются в двойные кавычки.
 
```html
<form action="/" method="post"></form>
```
 
Для всех неодиночных элементов должны быть закрывающие теги, даже если по спецификации их допустимо не закрывать (например, `p`, `li`).
 
```html
<p class="paragraph">
    {{content}}
</p>
```
 
Для одиночных элементов (`img`, `br`, `hr`, `link`, `meta`, …) *не используется* XHTML-синтаксис закрытия тега.
 
```html
<img src="picture.jpg" width="320" height="240">
```
 
##Строчные элементы
 
Строчный элемент, по возможности, раполагается в одну строку.
 
```html
<a href="http://2gis.ru">2gis</a>
```
 
Если атрибутов много, или элементы внутри имеют вложенные элементы, допустимо размещать содержимое элемента на новой строке, с отступом в четыре пробела.
 
```html
<a href="http://2gis.ru" class="link">
    <span class="link__in">2gis</span>
</a>
```
 
##Блочные элементы
 
Содержимое блока в HTML начинается на новой строке, с отступом в четыре пробела.
 
```html
<div class="article">
    {{article}}
</div>
```
 
Если у блока нет содержимого или оно будет вставлено в рантайме, элемент размещается в одну строку.
 
```html
<div class="article"></div>
```
 
Если внутри блока располагается несколько блоков с вложенными элементами, то допустимо отбивать такие блоки друг от друга пустыми строками.
 
```html
<article class="article">
    
    <header class="article__header">
        <h1 class="article__headerTitle">
            {{title}}
        </h1>
    </header>
    
    {{content}}
    
    <footer class="article__footer">
        {{contentinfo}}
    </footer>
    
</article>
```
 
3. Если элемент один — не отбиваем
4. Если элементов несколько, то отбиваем по необходимости
5. Порядок атрибутов
 
1. Вложенность при использовании шаблонизаторов
2. Комментарии к отдельным блокам кода

#CSS

##1. Оформление стилевых правил

1.1. После двоеточия в правиле ставится пробел. В конце всех правил ставится точка с запятой.

```css
position: relative;
```

1.2. Необязательные нули в правилах опускаются.

Хорошо:

```css
opacity: 0.5;
```

Еще лучше:

```css
opacity: .5;
```

1.3. После нуля в значениях не ставится единица измерения.

Плохо:

```css
width: 0px;
```

Хорошо:

```css
width: 0;
```

1.4. После запятых в правилах ставятся пробелы.

```css
background: rgba(255, 255, 255, .5);
```

1.5. В качестве отступа используются 4 пробела.

1.6. Для правил с множественными значениями, каждое значение начинается с новой строки с отступом в 4 пробела. В этом случае, пробел после запятой не ставится.

```css
box-shadow:
    0 1px 3px 0 rgba(0, 0, 0, .4),
    0 0 5px 0 rgba(255, 255, 255, .5);
```

1.7. Там, где возможно, лучше сократить количество правил.

Плохо:

```css
font-family: Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 24px;
```

Хорошо:

```css
font: 14px/24px Helvetica, Arial, sans-serif;
```

1.7. Для определения псевдоэлементов для совместимости используется одно двоеточие.

Хорошо:

```css
.class::before {}
```

Совместимо:

```css
.class:before {}
```

Исключение составляют префиксные или неподдерживаемые в старых браузерах псевдоэлементы.

Пример 1:

```css
.class::-webkit-scrollbar {}
```

Пример 2:

```css
.class::-ms-input-placeholder {}
```

##Список правил

###2. Множественные значения

2.1. Для списка префиксных правил, беспрефиксное ставится последним.

2.2. Список префиксных правил сортируется по длине в обратном порядке. Список допустимо выравнивать по столбцам.

Хорошо:

```css
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
```

Еще лучше:

```css
-webkit-user-select: none;
   -moz-user-select: none;
    -ms-user-select: none;
        user-select: none;
```

Такое выравнивание позволяет эффективно использовать возможности современных IDE.

2.3. Список правил внутри селектора сортируется [по Zen-найстройкам CSSComb](https://github.com/csscomb/csscomb.js/blob/master/config/zen.json)

2.4. При использовании препроцессоров, допустимо определять правила для псевдоклассов, псевдоэлементов и модификаторов через &-синтаксис. Список основных правил селектора в этом случае отбивается от амперсандных правил разрывом строки.

```css
a {
    color: blue;
    text-decoration: underline;
    
    &:active {
        color: red;
        }    
    }
```

2.5. Порядок указания амперсандных правил:

* Псевдоклассы;
* наследование с использованием псевдоклассов;
* псевдоэлементы;
* наследование с использованием псевдоэлементов;
* модификации селектора;
* наследование с модификацией предка.

Смысловые блоки правил допустимо отбивать разрывом строки. 

```css
.quote-link {
    color: #079;
    text-decoration: none;
    
    &:hover {
        color: #09c;
        }  
    &:active {
        color: #c00;
        }    
    
    &:before {
        content: '«';  
        }
    &:after {
        content: '»';
        }
    }
```

Указанный порядок допустимо нарушать для выделения смысловых блоков.

```css
.callout__type {
    position: relative;
    padding: 0 0 0 24px;
    font-size: 14px;
    
    &:before {
        position: absolute;
        top: 8px;
        left: 0;
        content: '';
        }
    
    /* in parking callout */
    .callout--parking & {
        padding: 0 0 0 28px;
        }
    .callout--parking &:before {
        top: 10px;
        }

    /* in pass callout */
    .callout--pass & {
        padding: 0 0 0 20px;
        }
    .callout--pass &:before {
        top: 12px;
        }
    }
```

2.6. Разрыв строки допустимо использовать внутри основного списка правил для выделения смысловых блоков. Например, при разработке кастомизируемого блока для разделения обязательных правил и стилей по умолчанию.

```css
.gallery {
    /* Блок обязательных правил */
    position: relative;
    overflow: hidden;
    
    /* Стили по умолчанию */
    margin: auto;
    width: 100%;
    height: 100%;
    }
```

##3. Оформление селекторов

3.1. Селекторы отбиваются друг от друга разрывом строки.

3.2. Для оформления БЭМ-блоков используется «[лесенка](http://pepelsbey.net/pres/css-management/)».

```css
.makeup {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1;
    background: #4e4d4b;
    color: #fff;
    font: 20px/1 'Helvetica Neue', Helvetica, Arial, sans-serif;
    }

    .makeup__menu {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        z-index: 2;
        overflow: hidden;
        height: 2em;
        background: #363535;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, .7);
        }

    .makeup__aside {
        position: absolute;
        top: 2em;
        bottom: 0;
        left: 0;
        z-index: 1;
        width: 10em;
        background: #1e1e1e;
        }

        .makeup__aside-in {
            overflow-y: scroll;
            height: 100%;

            &::-webkit-scrollbar {
                width: 0;
                }
            }
```

3.3. Если в файле располагается несколько БЭМ-блоков, блоки отбиваются друг от друга двумя разрывами строк.

3.4. Общий порядок стилевого файла (с учетом возможностей препроцессоров):

* Импорты **Не рекомендуется, конкатенация файлов — задача сборки**
* Константы
* Миксины 
* Список блоков
    * Основные стили блока
    * Анимации
    * Медиавыражения
